---
import GradientOrbs from "./ui/GradientOrbs.astro";
import Button from "./ui/Button.astro";
---

<section id="cta" class="relative py-[var(--spacing-section-desktop)] max-md:py-[var(--spacing-section-mobile)] overflow-hidden">
  <GradientOrbs variant="cta" />

  <div class="container-content relative z-10 text-center">
    <h2 class="text-display mb-8" data-cta-reveal>
      Ready to find your flow?
    </h2>

    <div data-cta-reveal>
      <Button variant="primary" size="lg" href="/dashboard" data-cursor-hover>
        Go to Dashboard
        <span aria-hidden="true">&rarr;</span>
      </Button>
    </div>

    <p class="text-sm text-text-secondary mt-6" data-cta-reveal>
      Free for individuals. Team plans from $12/mo.
    </p>
  </div>
</section>

<script>
  import { scrollStagger, registerGSAP, prefersReducedMotion } from "@/utils/animations";
  import { gsap } from "gsap";

  registerGSAP();

  if (!prefersReducedMotion()) {
    scrollStagger("[data-cta-reveal]", {
      trigger: "#cta" as unknown as Element,
      stagger: 0.15,
    });

    // Parallax orbs on scroll
    gsap.to(".gradient-orbs-container .gradient-orb:nth-child(1)", {
      scrollTrigger: {
        trigger: "#cta",
        start: "top bottom",
        end: "bottom top",
        scrub: 1,
      },
      y: -60,
      ease: "none",
    });

    gsap.to(".gradient-orbs-container .gradient-orb:nth-child(2)", {
      scrollTrigger: {
        trigger: "#cta",
        start: "top bottom",
        end: "bottom top",
        scrub: 1,
      },
      y: 60,
      ease: "none",
    });
  }
</script>
